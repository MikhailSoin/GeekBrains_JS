<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script>
        /**На базе игры, созданной на уроке, реализовать игру «Кто хочет стать миллионером?»*/

        /**
     *
     * @type {object[]} массив с объектами вопросов
     */
    const questions = [
        {
            text: 'Откуда сотрудники офисов наливают в чашки воду?',
            variants: {
                'a': 'из принтера',
                'b': 'из сканера',
                'c': 'из степлера',
                'd': 'из кулера',
            },
            correctAnswerIndex: 'd',
        },
        {
            text: 'Что построил Джек в стихотворении, переведенным с английского Маршаком?',
            variants: {
                'a': 'маршрут',
                'b': 'график',
                'c': 'дом',
                'd': 'коммунизм',
            },
            correctAnswerIndex: 'c',
        },
        {
            text: 'Что может возникнуть на шахматной доске?',
            variants: {
                'a': 'вечный шах',
                'b': 'вечный мат',
                'c': 'вечный зов',
                'd': 'вечный двигатель',
            },
            correctAnswerIndex: 'a',
        },
        {
            text: 'Что такое каршеринг?',
            variants: {
                'a': 'секонд-хенд',
                'b': 'напольный светильник',
                'c': 'брачный танец вороны',
                'd': 'аренда автомобиля',
            },
            correctAnswerIndex: 'd',
        },
        {
            text: 'Как иногда сокращают имя Сергей?',
            variants: {
                'a': 'Серый',
                'b': 'Бурый',
                'c': 'Малиновый',
                'd': 'Вишневый',
            },
            correctAnswerIndex: 'a',
        },
    ];

    const game = {
      questions,
      scoreCount: null,
      questionIndex: null,

        /**
         * Инициализация игры
         */
        init() {
            this.scoreCount = 0;
            this.questionIndex = 0;
        },

        /**
         * Запуск игры
         */
        run() {
            while (true) {
                alert('Добро пожаловать в игру "Кто хочет стать миллионером!"');
                this.init();

                while (this.questionIndex < 5) {
                    alert (`Вопрос номер ${this.questionIndex + 1}`);
                    this.getCurrentQuestionString(this.questionIndex);

                    const userAnswer = this.getAnswer();

                    if (this.validateAnswer(userAnswer) && this.isAnswerCorrect(userAnswer)) {
                        alert('Поздравляю!!! Это правильный ответ!');
                        this.scoreCount += 1;
                    } else if (this.userWantExit(userAnswer)) {
                        return alert('До свидания');
                    } else if (this.validateAnswer(userAnswer) && !this.isAnswerCorrect(userAnswer)) {
                        alert('К сожалению это не правильный ответ. Не расстраивайтесь!');
                    } else {
                        const availableAnswers = ['a', 'b', 'c', 'd'];
                        alert(`К сожалению это не правильный ответ. Возможные варианты ответов: ` +
                            `${availableAnswers.join(', ')}`);
                    }

                    this.questionIndex += 1;
                }

                alert(`Поздравляю - игра завершена! Количество правильных ответов: ${this.scoreCount}.`)

                if (!confirm('Хотите сыграть еще?')) {
                    return alert('До свидания!');
                }

                this.init();
            }
        },

        /**
         * Получаем ответ от пользователя
         * @returns {string} строка ответа пользователя
         */
        getAnswer() {
            return prompt('Введите вариант ответа, -1 для выхода.');
        },

        /**
         * Возвращает строку с текущим вопросом и вариантами ответов
         * @returns {string} строку с текущим вопросом и вариантами ответов
         */
        getCurrentQuestionString(index) {
            const question = this.questions[index];
            let str = `${question.text}\n\n`;

            for (const key in question.variants) {
                str += `${key} - ${question.variants[key]}\n`;
            }

            return alert(str);
        },

        /**
         * Проверяет ответ пользователя на корректность ввода
         * @param userAnswer Ответ пользователя
         * @returns {boolean} true, если пользователь ввел корректные данные, иначе false
         */
        validateAnswer(userAnswer) {
            const availableAnswers = ['a', 'b', 'c', 'd'];

            return availableAnswers.includes(userAnswer);
        },

        /**
         * Проверяет ввел ли пользователь вместо ответа информацию для выхода из игры
         * @param userAnswer Ответ пользователя
         * @returns {boolean} true, если пользователь хотел выйти, иначе false
         */
        userWantExit(userAnswer) {
            return userAnswer === '-1';
        },

        /**
         * Проверяет является ли ответ, переданный в функцию, верным
         * @param userAnswer Ответ пользователя
         * @returns {boolean} true, если пользователь верный, иначе false
         */
        isAnswerCorrect(userAnswer) {
            const correctAnswer = questions[this.questionIndex].correctAnswerIndex;

            return correctAnswer === userAnswer;
        },

        /**
         * Проверяет закончилась ли игра
         * @returns {boolean} true, если было задано 5 вопросов, иначе false
         */
        isGameOver() {
            return this.questionIndex === 5;
        },

    };

    game.run();


    </script>
</body>
</html>